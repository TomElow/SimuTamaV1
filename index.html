<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simu Tamagotchi V1</title>

<style>
body {
    background: #e6e6e6;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    text-align: center;
    padding: 20px;
}

h1 {
    margin-bottom: 18px;
}

/* Frame like Tamagotchi shell */
#frame {
    display: inline-block;
    padding: 14px;
    background: #333;
    border-radius: 6px;
}

#screen {
    background: #cfd8c3;
    image-rendering: pixelated;
}

/* Buttons A B C */
.buttons {
    margin-top: 28px;
}

.buttons button {
    width: 60px;
    height: 42px;
    margin: 0 10px;
    border-radius: 22px;
    border: none;
    background: #ddd;
    font-size: 18px;
    font-weight: bold;
}
</style>
</head>

<body>

<h1>Simu Tamagotchi V1</h1>

<!-- LCD -->
<div id="frame">
    <canvas id="screen" width="32" height="16"></canvas>
</div>

<!-- Buttons -->
<div class="buttons">
    <button onclick="pressA()">A</button>
    <button onclick="pressB()">B</button>
    <button onclick="pressC()">C</button>
</div>

<script type="module">
import { TamaV1 } from "./core/tama-core.js";
import { LCD } from "./ui/lcd.js";
import { SPRITES } from "./ui/sprites-v1.js";
import { Menu } from "./ui/menu.js";
import { ICONS } from "./ui/icons-v1.js";

/* Init core + UI */
const tama = new TamaV1(0);
const lcd = new LCD("screen", 10);
const menu = new Menu();

/* Render LCD */
function render() {
    lcd.clear();

    /* Draw Tamagotchi (centered) */
    if (tama.stage === "EGG") {
        lcd.sprite(14, 6, SPRITES.EGG);
    } else {
        lcd.sprite(14, 6, SPRITES.BABY);
    }

    /* Draw menu icon (top-right, like V1) */
    const icon = menu.current();
    if (ICONS[icon]) {
        lcd.sprite(23, 1, ICONS[icon]);
    }
}

/* Button bindings */
window.pressA = () => {
    menu.pressA();
    render();
};

window.pressB = () => {
    menu.pressB(tama);
    render();
};

window.pressC = () => {
    menu.pressC();
    render();
};

/* Real-time clock: 1 minute = 1 tick */
setInterval(() => {
    tama.tick(1);
    render();
}, 60000);

/* Initial render */
render();
</script>

</body>
</html>