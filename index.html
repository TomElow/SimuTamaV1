<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simu Tamagotchi V1</title>

<style>
    body {
        background: #e6e6e6;
        font-family: -apple-system, BlinkMacSystemFont, sans-serif;
        text-align: center;
        padding: 20px;
    }

    h1 {
        margin-bottom: 10px;
    }

    #screen {
        width: 320px;
        height: 160px;
        background: #cfd8c3;
        border: 6px solid #333;
        margin: 20px auto;
        image-rendering: pixelated;
    }

    .buttons {
        margin-top: 15px;
    }

    button {
        font-size: 16px;
        padding: 10px 18px;
        margin: 0 5px;
    }

    #debug {
        text-align: left;
        max-width: 320px;
        margin: 20px auto;
        background: #fff;
        padding: 10px;
        font-family: monospace;
        font-size: 14px;
        border: 1px solid #ccc;
    }
</style>
</head>

<body>

<h1>Simu Tamagotchi V1</h1>

<!-- LCD PLACEHOLDER -->
<canvas id="screen" width="32" height="16"></canvas>

<!-- TEMP BUTTONS (DEBUG ONLY) -->
<div class="buttons">
    <button onclick="tick(1)">+1 min</button>
    <button onclick="tick(30)">+30 min</button>
    <button onclick="feed()">Feed</button>
    <button onclick="play()">Play</button>
</div>

<!-- DEBUG OUTPUT -->
<pre id="debug">Loading...</pre>

<script type="module">
import { TamaV1 } from "./core/tama-core.js";

const tama = new TamaV1(0);
const debug = document.getElementById("debug");

function renderDebug() {
    const s = tama.snapshot();
    debug.textContent =
`Stage        : ${s.stage}
Age (min)    : ${s.ageMinutes}
Hunger       : ${s.hunger}
Happiness    : ${s.happiness}
Discipline   : ${s.discipline}
CareMistakes : ${s.careMistakes}
Poop         : ${s.poopCount}
Sick         : ${s.isSick}
Attention    : ${s.attentionFlag}
Dead         : ${s.isDead}`;
}

window.tick = function(min) {
    tama.tick(min);
    renderDebug();
};

window.feed = function() {
    tama.feedMeal();
    renderDebug();
};

window.play = function() {
    tama.playGame();
    renderDebug();
};

// Initial render
renderDebug();
</script>

</body>
</html>